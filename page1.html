<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Double Memory Reveal</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff8f0;
      text-align: center;
      padding: 40px;
    }
    .puzzle-container {
      margin-bottom: 60px;
    }
    .puzzle-title {
      font-size: 20px;
      margin: 10px 0;
    }
    .puzzle {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      grid-template-rows: repeat(4, 100px);
      gap: 1px;
      margin: 20px auto;
      width: 408px;
    }
    .piece {
      position: relative;
      width: 100px;
      height: 100px;
      background-size: 400px 400px;
      background-repeat: no-repeat;
      cursor: pointer;
      transition: filter 0.6s ease, border 0.6s ease; /* fade border too */
      border: 2px solid #333; /* visible border */
      border-radius: 6px; /* rounded corners */
      box-sizing: border-box;
    }
    .overlay {
      position: absolute;
      inset: 0;
      background-color: rgb(14, 182, 70);
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      text-align: center;
      padding: 5px;
      border-radius: 6px; /* match tile corners */
      /* font-size: 14px; */
    }
    .revealed .overlay {
      display: none;
    }
    .revealed {
      filter: none;
      border-color: transparent; /* border disappears */
    }
    .message {
      margin-top: 20px;
      font-size: 16px;
      display: none;
    }

    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
    .overlay.fade-out {
        animation: fadeOut 0.6s forwards;
    }
  </style>
</head>
<body>
  <h1>Reveal Our Memories</h1>

  <div class="puzzle-container">
    <div class="puzzle-title">Memory #1</div>
    <div id="puzzle1" class="puzzle"></div>
    <div id="message1" class="message">You've revealed the first memory! ðŸ’–</div>
  </div>

  <div class="puzzle-container">
    <div class="puzzle-title">Memory #2</div>
    <div id="puzzle2" class="puzzle"></div>
    <div id="message2" class="message">You've revealed the second memory! ðŸŒŸ</div>
  </div>

  <script>
    function createPuzzle(puzzleId, messageId, imageUrl, tileTexts) {
      const puzzle = document.getElementById(puzzleId);
      const message = document.getElementById(messageId);
      let revealedCount = 0;
      const totalPieces = 16;

      let index = 0;
      for (let row = 0; row < 4; row++) {
        for (let col = 0; col < 4; col++) {
          const piece = document.createElement('div');
          piece.classList.add('piece');
          piece.style.backgroundImage = `url('${imageUrl}')`;
          piece.style.backgroundPosition = `-${col * 100}px -${row * 100}px`;

          const overlay = document.createElement('div');
          overlay.classList.add('overlay');
          overlay.textContent = tileTexts[index++];
          piece.appendChild(overlay);

          piece.addEventListener('click', function () {
            if (!piece.classList.contains('revealed')) {
              overlay.classList.add('fade-out')
              piece.style.borderColor = 'transparent'; // start fading the border immediately
              setTimeout(() => {
                piece.classList.add('revealed');
                revealedCount++;
                if (revealedCount === totalPieces) {
                    message.style.display = 'block';
                }
              }, 600); // wait for fade-out to complete
            }
          });

          puzzle.appendChild(piece);
        }
      }
    }

    const tileTexts1 = [
      "First day", "That smile", "Pizza night", "Your drawing",
      "Funny face", "Big laugh", "Park bench", "Socks story",
      "Morning light", "Long talk", "Secret handshake", "Lego tower",
      "Goofy hat", "Dancing rain", "Hug moment", "Fireplace chat"
    ];

    const tileTexts2 = [
      "Sunrise walk", "Silly song", "Wildflowers", "Picnic spot",
      "That hug", "The postcard", "Late coffee", "Photo shoot",
      "Lost & found", "First snow", "Puzzle night", "The toast",
      "Shooting star", "Campfire", "Warm socks", "Goodnight kiss"
    ];

    createPuzzle("puzzle1", "message1", "memory.jpg", tileTexts1);
    createPuzzle("puzzle2", "message2", "memory2.png", tileTexts2);
  </script>
</body>
</html>
